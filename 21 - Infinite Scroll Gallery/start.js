(() => {
  const images = [
    "1562887284-db69d5836c96",
    "1586045557622-3f3917118043",
    "1586265842513-08e427190880",
    "1586266560973-7288bb128ade",
    "1586077427825-15dca6b44dba",
    "1586244074568-24bd29e524d4",
    "1585862485091-8f45524e8336",
    "1558981001-5864b3250a69",
    "1586227180855-c6fc42170e2f",
    "1586116458610-06bf748676bc",
    "1586119022447-e835aefdaedc",
    "1586115321950-0f1d09f668a0",
    "1586078248672-e31a213cecec",
    "1586240736293-34baad018497",
    "1586242544246-69d3f1b68ab8",
    "1586084475151-e2f744d2836d",
    "1586202679035-bd69f419a1fd",
    "1586136324636-e325aeb8eb62",
    "1586031489464-3fbe15f3e40d",
    "1558980394-dbb977039a2e",
    "1562887245-138c2f45013e",
    "1586232585940-e03f5bb27aa7",
    "1562887284-db69d5836c96",
    "1586045557622-3f3917118043",
    "1586265842513-08e427190880",
    "1586266560973-7288bb128ade",
    "1586077427825-15dca6b44dba",
    "1586244074568-24bd29e524d4",
    "1585862485091-8f45524e8336",
    "1558981001-5864b3250a69",
    "1586227180855-c6fc42170e2f",
    "1586116458610-06bf748676bc",
    "1586119022447-e835aefdaedc",
    "1586115321950-0f1d09f668a0",
    "1586078248672-e31a213cecec",
    "1586240736293-34baad018497",
    "1586242544246-69d3f1b68ab8",
    "1586084475151-e2f744d2836d",
    "1586202679035-bd69f419a1fd",
    "1586136324636-e325aeb8eb62",
    "1586031489464-3fbe15f3e40d",
    "1558980394-dbb977039a2e",
    "1562887245-138c2f45013e",
    "1586232585940-e03f5bb27aa7",
    "1562887284-db69d5836c96",
    "1586045557622-3f3917118043",
    "1586265842513-08e427190880",
    "1586266560973-7288bb128ade",
    "1586077427825-15dca6b44dba",
    "1586244074568-24bd29e524d4",
    "1585862485091-8f45524e8336",
    "1558981001-5864b3250a69",
    "1586227180855-c6fc42170e2f",
    "1586116458610-06bf748676bc",
    "1586119022447-e835aefdaedc",
    "1586115321950-0f1d09f668a0",
    "1586078248672-e31a213cecec",
    "1586240736293-34baad018497",
    "1586242544246-69d3f1b68ab8",
    "1586084475151-e2f744d2836d",
    "1586202679035-bd69f419a1fd",
    "1586136324636-e325aeb8eb62",
    "1586031489464-3fbe15f3e40d",
    "1558980394-dbb977039a2e",
    "1562887245-138c2f45013e",
    "1586232585940-e03f5bb27aa7",
    "1562887284-db69d5836c96",
    "1586045557622-3f3917118043",
    "1586265842513-08e427190880",
    "1586266560973-7288bb128ade",
    "1586077427825-15dca6b44dba",
    "1586244074568-24bd29e524d4",
    "1585862485091-8f45524e8336",
    "1558981001-5864b3250a69",
    "1586227180855-c6fc42170e2f",
    "1586116458610-06bf748676bc",
    "1586119022447-e835aefdaedc",
    "1586115321950-0f1d09f668a0",
    "1586078248672-e31a213cecec",
    "1586240736293-34baad018497",
    "1586242544246-69d3f1b68ab8",
    "1586084475151-e2f744d2836d",
    "1586202679035-bd69f419a1fd",
    "1586136324636-e325aeb8eb62",
    "1586031489464-3fbe15f3e40d",
    "1558980394-dbb977039a2e",
    "1562887245-138c2f45013e",
    "1586232585940-e03f5bb27aa7",
  ].map(
    (id) =>
      `https://images.unsplash.com/photo-${id}?q=75&fm=jpg&w=${
        Math.random() * 250 + 250
      }&fit=max`
  );

  let page = 0;
  async function displayImages() {
    const loaderElem = document.querySelector(".loader");
    loaderElem.classList.add("visible");

    await new Promise((resolve) => setTimeout(() => resolve(), 500));

    images.slice(page * 10, page * 10 + 10).forEach((imageUrl) => {
      const imgElem = document.createElement("img");
      imgElem.src = imageUrl;

      const galleryElem = document.querySelector(".gallery");
      galleryElem.appendChild(imgElem);
    });

    loaderElem.classList.remove("visible");
    page += 1;
  }

  document.addEventListener("scroll", () => {
    const { scrollTop, scrollHeight, clientHeight } = document.documentElement;

    if (scrollTop + clientHeight >= scrollHeight - 10) {
      displayImages();
    }
  });

  displayImages();
})();
